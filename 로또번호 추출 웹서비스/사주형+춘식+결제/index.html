<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ€ ì¶˜ì‹ì´ ì‚¬ì£¼ ë¡œë˜ (5ì„¸íŠ¸)</title>

  <style>
    :root{
      --bg1:#f6f2e7;
      --bg2:#efe7d6;
      --card:#ffffffcc;
      --stroke:rgba(24, 32, 48, .12);
      --shadow: 0 20px 60px rgba(15, 23, 42, 0.18);
      --text:#142033;
      --sub: rgba(20, 32, 51, .68);

      --mint:#b9ce89;
      --mint2:#5ca95b;
      --butter:#e8c572;
      --pink:#f7a3b0;

      --btn1:#22c55e;
      --btn2:#16a34a;

      --radius: 26px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 15% 20%, rgba(92,169,91,.18), transparent 55%),
        radial-gradient(900px 500px at 85% 30%, rgba(232,197,114,.18), transparent 55%),
        radial-gradient(900px 500px at 50% 95%, rgba(247,163,176,.14), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    /* background bubbles */
    .bg-bubbles{
      position:fixed; inset:0;
      pointer-events:none; z-index:0;
      opacity:.55;
    }
    .bubble{
      position:absolute;
      width: 180px; height: 180px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.7), rgba(255,255,255,.15));
      border: 1px solid rgba(255,255,255,.5);
      box-shadow: 0 18px 45px rgba(20,32,51,.08);
      animation: floaty 10s ease-in-out infinite;
    }
    .bubble.b1{ left:-40px; top:18%; width:220px; height:220px; animation-duration: 12s; }
    .bubble.b2{ right:-60px; top:8%; width:260px; height:260px; animation-duration: 14s; }
    .bubble.b3{ left:12%; bottom:-80px; width:240px; height:240px; animation-duration: 16s; }
    .bubble.b4{ right:18%; bottom:-120px; width:300px; height:300px; animation-duration: 18s; }
    @keyframes floaty{
      0%,100%{ transform: translateY(0) translateX(0) scale(1); }
      50%{ transform: translateY(-18px) translateX(12px) scale(1.02); }
    }

    .wrap{
      position:relative;
      z-index:1;
      width:min(1120px, 92vw);
      margin: clamp(18px, 4vw, 36px) auto;
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      gap: 18px;
    }
    @media (max-width: 980px){
      .wrap{ grid-template-columns: 1fr; }
    }

    .panel{
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      overflow:hidden;
      position:relative;
    }
    .panel::before{
      content:"";
      position:absolute;
      inset:-40px;
      background:
        radial-gradient(240px 240px at 20% 20%, rgba(185,206,137,.35), transparent 62%),
        radial-gradient(220px 220px at 80% 10%, rgba(232,197,114,.26), transparent 60%),
        radial-gradient(220px 220px at 85% 85%, rgba(247,163,176,.22), transparent 62%);
      pointer-events:none;
      z-index:0;
    }
    .panel > *{ position:relative; z-index:1; }

    /* LEFT */
    .left{ padding: 22px 22px 18px; }

    .title-row{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
    }
    h1{
      margin:0;
      font-size: clamp(20px, 2.2vw, 28px);
      letter-spacing: -0.5px;
      line-height:1.1;
    }
    .subtitle{
      margin:8px 0 0;
      color:var(--sub);
      font-size: 14px;
      line-height:1.4;
    }

    .badge{
      display:flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border-radius: 999px;
      border:1px solid rgba(20,32,51,.12);
      background: rgba(255,255,255,.75);
      box-shadow: 0 10px 22px rgba(20,32,51,.08);
      white-space:nowrap;
      user-select:none;
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: linear-gradient(135deg, var(--btn1), var(--btn2));
      box-shadow: 0 0 0 4px rgba(34,197,94,.18);
    }
    .badge span{ font-size: 12px; color: rgba(20,32,51,.75); font-weight:900; }

    .form{
      margin-top: 14px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    @media (max-width: 560px){
      .form{ grid-template-columns: 1fr; }
    }
    .field{
      background: rgba(255,255,255,.58);
      border: 1px solid rgba(20,32,51,.14);
      border-radius: 16px;
      padding: 10px 12px;
      box-shadow: 0 10px 22px rgba(20,32,51,.06);
    }
    .field label{
      display:block;
      font-size: 12px;
      color: rgba(20,32,51,.68);
      font-weight: 950;
      margin-bottom: 6px;
      letter-spacing:-0.2px;
    }
    .field input{
      width:100%;
      border:none;
      outline:none;
      background: transparent;
      font-size: 14px;
      color: rgba(20,32,51,.92);
      font-weight: 850;
    }
    .field small{
      display:block;
      margin-top: 6px;
      font-size: 11px;
      color: rgba(20,32,51,.55);
      line-height:1.25;
    }

    .controls{
      margin-top: 12px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
    }
    button{
      border:none;
      border-radius: 16px;
      padding: 12px 14px;
      cursor:pointer;
      font-weight: 980;
      transition: transform .12s ease, filter .14s ease, opacity .14s ease;
      user-select:none;
      display:flex;
      align-items:center;
      gap:10px;
      letter-spacing:-0.2px;
    }
    button:active{ transform: translateY(1px) scale(.99); }
    button:hover{ filter: brightness(1.02); }

    .btn-main{
      background: linear-gradient(135deg, var(--btn1), var(--btn2));
      color: #062012;
      box-shadow: 0 14px 28px rgba(22,163,74,.22);
      flex: 1;
      min-width: 240px;
      position:relative;
      overflow:hidden;
    }
    .btn-main::after{
      content:"";
      position:absolute;
      inset:-40px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.45), transparent 40%);
      transform: translateX(-20%);
      opacity:.85;
      pointer-events:none;
    }

    .btn-ghost{
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(20,32,51,.14);
      color: rgba(20,32,51,.86);
      box-shadow: 0 10px 22px rgba(20,32,51,.08);
    }
    .btn-mini{
      padding: 10px 12px;
      border-radius: 16px;
      font-size: 13px;
      font-weight: 950;
      background: rgba(255,255,255,.65);
      border: 1px solid rgba(20,32,51,.14);
      color: rgba(20,32,51,.85);
      box-shadow: 0 10px 18px rgba(20,32,51,.08);
    }

    .btn-icon{
      width: 34px; height: 34px;
      border-radius: 999px;
      display:grid;
      place-items:center;
      background: rgba(255,255,255,.65);
      border:1px solid rgba(20,32,51,.12);
    }

    .meta{
      margin-top: 12px;
      display:flex;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      color: rgba(20,32,51,.68);
      font-size: 13px;
    }
    .toast{
      margin-top: 12px;
      min-height: 20px;
      font-size: 13px;
      color: rgba(20,32,51,.70);
    }
    .footer-hint{
      margin-top: 10px;
      font-size: 12px;
      color: rgba(20,32,51,.58);
      line-height:1.35;
    }

    /* RIGHT */
    .right{ display:flex; flex-direction:column; }

    .hero{
      padding: 18px 18px 0;
      display:flex;
      align-items:center;
      gap:14px;
    }
    .hero-img{
      width: 108px; height: 108px;
      border-radius: 26px;
      overflow:hidden;
      border: 1px solid rgba(20,32,51,.12);
      box-shadow: 0 16px 30px rgba(20,32,51,.14);
      flex: 0 0 auto;
      background: rgba(255,255,255,.65);
      position:relative;
    }
    .hero-img img{
      width:100%; height:100%;
      object-fit:cover;
      transform: scale(1.08);
      filter: saturate(1.06) contrast(1.03);
    }
    .hero-text{ flex:1; min-width:0; }
    .hero-text .big{
      font-weight: 1000;
      letter-spacing:-0.6px;
      font-size: 16px;
      margin:0 0 6px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .hero-text .small{
      margin:0;
      color: rgba(20,32,51,.64);
      font-size: 13px;
      line-height:1.35;
    }

    .result{
      padding: 14px 18px 18px;
      display:flex;
      flex-direction:column;
      gap: 12px;
    }

    /* NAVER-STYLE fortune card */
    .fortune-card{
      background: rgba(255,255,255,.66);
      border: 1px solid rgba(20,32,51,.12);
      border-radius: 20px;
      box-shadow: 0 12px 24px rgba(20,32,51,.10);
      overflow:hidden;
      position:relative;
    }
    .fortune-card::before{
      content:"";
      position:absolute; inset:-40px;
      background:
        radial-gradient(300px 200px at 10% 10%, rgba(34,197,94,.16), transparent 60%),
        radial-gradient(260px 180px at 90% 0%, rgba(232,197,114,.14), transparent 60%);
      pointer-events:none;
    }
    .fortune-inner{ position:relative; z-index:1; padding: 14px; }

    .tabs{
      display:flex; gap:8px; flex-wrap:wrap;
      margin-bottom: 12px;
    }
    .tab{
      padding: 8px 12px;
      border-radius: 999px;
      font-weight: 950;
      font-size: 12px;
      border: 1px solid rgba(20,32,51,.14);
      background: rgba(255,255,255,.55);
      color: rgba(20,32,51,.78);
      user-select:none;
    }
    .tab.active{
      border-color: rgba(22,163,74,.45);
      box-shadow: 0 0 0 4px rgba(34,197,94,.12);
      color: rgba(7, 83, 43, .95);
    }

    .icons{
      display:grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 10px;
      margin-bottom: 12px;
    }
    @media (max-width: 520px){
      .icons{ grid-template-columns: repeat(3, 1fr); }
    }
    .icon-item{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      padding: 10px 8px;
      border-radius: 16px;
      border: 1px solid rgba(20,32,51,.12);
      background: rgba(255,255,255,.55);
      box-shadow: 0 10px 18px rgba(20,32,51,.06);
      gap: 6px;
      text-align:center;
    }
    .icon-emoji{
      width: 40px; height: 40px;
      border-radius: 999px;
      display:grid;
      place-items:center;
      background: rgba(255,255,255,.65);
      border: 1px solid rgba(20,32,51,.10);
      font-size: 18px;
    }
    .icon-label{ font-size: 12px; font-weight: 950; color: rgba(20,32,51,.80); }
    .icon-score{ font-size: 11px; color: rgba(20,32,51,.58); font-weight: 900; }

    .fortune-title{
      font-weight: 1000;
      letter-spacing: -0.6px;
      font-size: 16px;
      margin: 0;
    }
    .fortune-date{
      margin: 6px 0 0;
      font-size: 12px;
      color: rgba(20,32,51,.58);
      font-weight: 900;
    }
    .keyword{
      margin: 12px 0 10px;
      font-size: 18px;
      font-weight: 1000;
      letter-spacing:-0.6px;
    }
    .keyword .kw-pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 14px;
      border: 1px solid rgba(20,32,51,.12);
      background: rgba(255,255,255,.62);
      box-shadow: 0 10px 18px rgba(20,32,51,.08);
    }

    .fortune-text{
      margin: 0;
      font-size: 13px;
      color: rgba(20,32,51,.74);
      line-height: 1.55;
    }
    .section{
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px dashed rgba(20,32,51,.18);
    }
    .sec-h{
      margin:0 0 8px;
      font-size: 13px;
      font-weight: 1000;
      color: rgba(20,32,51,.86);
      display:flex;
      align-items:center;
      gap:8px;
    }
    .bullets{
      margin:0;
      padding-left: 18px;
      color: rgba(20,32,51,.74);
      font-size: 13px;
      line-height: 1.55;
    }
    .row{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top: 10px;
    }
    .pill{
      font-size: 12px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(20,32,51,.12);
      background: rgba(255,255,255,.62);
      color: rgba(20,32,51,.78);
      font-weight: 950;
      display:inline-flex;
      align-items:center;
      gap:8px;
      box-shadow: 0 10px 16px rgba(20,32,51,.06);
    }
    .lucky{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
    }
    .lucky .num{
      width: 38px; height: 38px;
      border-radius: 999px;
      display:grid;
      place-items:center;
      font-weight: 1000;
      box-shadow:
        inset 0 0 0 2px rgba(255,255,255,.22),
        0 10px 16px rgba(15,23,42,.16);
      user-select:none;
      opacity: 0;
      transform: translateY(8px) scale(.95);
      animation: pop .42s cubic-bezier(.2,.9,.2,1) forwards;
    }

    /* Lotto sets area */
    .sets{ display:grid; gap: 10px; }
    .set-card{
      background: rgba(255,255,255,.65);
      border: 1px solid rgba(20,32,51,.12);
      border-radius: 18px;
      padding: 12px 12px 10px;
      box-shadow: 0 10px 22px rgba(20,32,51,.08);
      overflow:hidden;
      position:relative;
    }
    .set-card::before{
      content:"";
      position:absolute;
      inset:-30px;
      background:
        radial-gradient(220px 160px at 10% 10%, rgba(185,206,137,.22), transparent 60%),
        radial-gradient(200px 140px at 80% 20%, rgba(232,197,114,.18), transparent 60%);
      pointer-events:none;
    }
    .set-top{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      position:relative;
      z-index:1;
    }
    .set-label{
      font-weight: 1000;
      letter-spacing:-0.4px;
      font-size: 13px;
      color: rgba(20,32,51,.82);
      display:flex;
      align-items:center;
      gap:8px;
    }
    .set-pill{
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(20,32,51,.12);
      background: rgba(255,255,255,.6);
      color: rgba(20,32,51,.70);
      font-weight: 950;
    }
    .mini-btn{
      padding: 8px 10px;
      border-radius: 14px;
      font-size: 12px;
      background: rgba(255,255,255,.7);
      border:1px solid rgba(20,32,51,.12);
      color: rgba(20,32,51,.82);
      box-shadow: 0 8px 14px rgba(20,32,51,.08);
      cursor:pointer;
      font-weight:950;
      display:flex;
      align-items:center;
      gap:8px;
      transition: transform .12s ease, opacity .12s ease;
    }
    .mini-btn:active{ transform: translateY(1px); opacity:.9; }

    .balls{
      margin-top: 10px;
      display:flex;
      flex-wrap:wrap;
      gap: 8px;
      position:relative;
      z-index:1;
      min-height: 48px;
    }
    .ball{
      width: 44px; height: 44px;
      border-radius: 999px;
      display:grid;
      place-items:center;
      font-weight: 1000;
      letter-spacing:-0.3px;
      color: rgba(11, 18, 32, .92);
      box-shadow:
        inset 0 0 0 2px rgba(255,255,255,.22),
        0 10px 18px rgba(15,23,42,.18);
      user-select:none;
      opacity: 0;
      transform: translateY(10px) scale(.92);
      will-change: transform, opacity, filter;
    }
    .ball.show{
      animation: pop .52s cubic-bezier(.2,.9,.2,1) both;
      animation-delay: var(--d, 0ms);
    }
    @keyframes pop{
      from { transform: translateY(10px) scale(.92); opacity: 0; filter: blur(2px); }
      to   { transform: translateY(0) scale(1); opacity: 1; filter: blur(0); }
    }

    .r1{ background: linear-gradient(135deg, #fbbf24, var(--butter)); }
    .r2{ background: linear-gradient(135deg, #93c5fd, #60a5fa); }
    .r3{ background: linear-gradient(135deg, #fda4af, var(--pink)); }
    .r4{ background: linear-gradient(135deg, #86efac, #34d399); }
    .r5{ background: linear-gradient(135deg, #c4b5fd, #a78bfa); }

    /* click spark */
    .spark{
      position:absolute;
      width:10px; height:10px;
      border-radius:999px;
      background: rgba(255,255,255,.9);
      pointer-events:none;
      box-shadow: 0 0 0 10px rgba(34,197,94,.12);
      animation: spark .6s ease-out forwards;
      z-index:9999;
    }
    @keyframes spark{
      from{ transform: translate(0,0) scale(.9); opacity: .9; }
      to  { transform: translate(var(--dx), var(--dy)) scale(0); opacity: 0; }
    }

    .loading{ pointer-events:none; opacity:.92; filter:saturate(1.05); }
    .loading .btn-icon{ animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }

    .link{
      text-decoration:none;
      font-weight: 950;
      color: rgba(7, 83, 43, .95);
    }
    .link-btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 10px 12px;
      border-radius: 16px;
      background: rgba(255,255,255,.62);
      border:1px solid rgba(20,32,51,.12);
      box-shadow: 0 10px 18px rgba(20,32,51,.08);
      color: rgba(20,32,51,.86);
      font-weight: 950;
      font-size: 13px;
    }

    @media (prefers-reduced-motion: reduce) {
      .bubble{ animation:none; }
      .ball.show{ animation:none; opacity:1; transform:none; filter:none; }
      button{ transition:none; }
      .loading .btn-icon{ animation:none; }
      .lucky .num{ animation:none; opacity:1; transform:none; }
    }
  </style>
</head>

<body>
  <div class="bg-bubbles" aria-hidden="true">
    <div class="bubble b1"></div>
    <div class="bubble b2"></div>
    <div class="bubble b3"></div>
    <div class="bubble b4"></div>
  </div>

  <main class="wrap">
    <!-- LEFT -->
    <section class="panel left">
      <div class="title-row">
        <div>
          <h1>ğŸ€ ì¶˜ì‹ì´ ì‚¬ì£¼ ë¡œë˜ (5ì„¸íŠ¸)</h1>
          <p class="subtitle">
            ê°„ë‹¨ ì •ë³´ ë„£ìœ¼ë©´ â€œì˜¤ëŠ˜ì˜ ì‚¬ì£¼â€ ëŠë‚Œìœ¼ë¡œ ê²°ê³¼ ë½‘ì•„ì¤€ë‹¤ëƒ¥ ğŸ¾<br/>
            <b>í–‰ìš´ì˜ ìˆ«ì</b> ë½‘ê³  â†’ ê·¸ ìˆ«ì <b>í¬í•¨ëœ 5ì„¸íŠ¸</b>ë„ ë°”ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤ëƒ¥!
          </p>
        </div>
        <div class="badge" title="ì¬ë¯¸ìš©ì´ë‹¤ëƒ¥">
          <span class="dot"></span>
          <span>ì¬ë¯¸ìš©ì´ëƒ¥</span>
        </div>
      </div>

      <!-- inputs -->
      <div class="form">
        <div class="field">
          <label for="inpName">ì´ë¦„</label>
          <input id="inpName" type="text" placeholder="ì˜ˆ) ë¯¼ì„" autocomplete="name"/>
          <small>ë¹„ì›Œë„ ëœë‹¤ëƒ¥(ê·¸ë• ëœë¤ ë¹„ì¤‘ ì»¤ì§„ë‹¤ëƒ¥)</small>
        </div>

        <div class="field">
          <label for="inpBirth">ìƒë…„ì›”ì¼</label>
          <input id="inpBirth" type="date" />
          <small>ì˜¤ëŠ˜ ìš´ì„¸ëŠ” ë‚ ì§œ ë”°ë¼ ë°”ë€ë‹¤ëƒ¥</small>
        </div>

        <div class="field" style="grid-column: 1 / -1;">
          <label for="inpKeyword">ì˜¤ëŠ˜ì˜ í•œ ì¤„(ì„ íƒ)</label>
          <input id="inpKeyword" type="text" placeholder="ì˜ˆ) ëˆë³µê°€ì¦ˆì•„ / í”¼ê³¤í•¨ / ê¸°ë¶„ì¢‹ìŒ" />
          <small>í‚¤ì›Œë“œ ë„£ìœ¼ë©´ ê¸°ìš´ì´ ì‚´ì§ ì„ì¸ë‹¤ëƒ¥</small>
        </div>
      </div>

      <div class="controls">
        <button class="btn-main" id="btnPick">
          <span class="btn-icon">ğŸ²</span>
          <span>ì‚¬ì£¼ ê¸°ìš´ìœ¼ë¡œ 5ì„¸íŠ¸ ë½‘ê¸°</span>
        </button>

        <button class="btn-ghost" id="btnLucky">
          <span class="btn-icon">ğŸ€</span>
          <span>í–‰ìš´ì˜ ìˆ«ì ë½‘ê¸°</span>
        </button>

        <button class="btn-ghost" id="btnLuckySets">
          <span class="btn-icon">ğŸ§§</span>
          <span>í–‰ìš´ í¬í•¨ 5ì„¸íŠ¸</span>
        </button>

        <button class="btn-ghost" id="btnCopyAll" title="5ì„¸íŠ¸ ì „ì²´ ë³µì‚¬">
          <span class="btn-icon">ğŸ“‹</span>
          <span>ì „ì²´ ë³µì‚¬</span>
        </button>

        <button class="btn-ghost" id="btnReset" title="ì´ˆê¸°í™”">
          <span class="btn-icon">ğŸ§¼</span>
          <span>ì´ˆê¸°í™”</span>
        </button>
      </div>

      <div class="meta">
        <div id="seedInfo">ê¸°ìš´: ëŒ€ê¸°ì¤‘ì´ëƒ¥</div>
        <div id="stamp">ëŒ€ê¸° ì¤‘</div>
      </div>

      <div class="toast" id="toast">
        ë¨¼ì € <b>í–‰ìš´ì˜ ìˆ«ì</b>ë¥¼ ë½‘ê±°ë‚˜, ë°”ë¡œ 5ì„¸íŠ¸ë¥¼ ë½‘ì•„ë„ ëœë‹¤ëƒ¥!
      </div>

      <div class="footer-hint">
        âœ… ì¶˜ì‹ì´ ì´ë¯¸ì§€: HTMLê³¼ ê°™ì€ í´ë”ì— <b>mascot.png</b>ë¡œ ì €ì¥í•˜ë©´ í‘œì‹œëœë‹¤ëƒ¥<br/>
        (ì—†ìœ¼ë©´ í´ë°± ê·¸ë¦¼ì´ ë– ì„œ ë§í¬ ê¹¨ì§ ë„ë°° ì•ˆ ë‚œë‹¤ëƒ¥)
      </div>
    </section>

    <!-- RIGHT -->
    <section class="panel right">
      <div class="hero">
        <div class="hero-img" title="mascot.pngë¥¼ ê°™ì€ í´ë”ì— ë‘ë©´ ì—¬ê¸° ëœ¬ë‹¤ëƒ¥!">
          <img id="mascot" alt="ìºë¦­í„°" src="./mascot.png" />
        </div>
        <div class="hero-text">
          <p class="big">ì˜¤ëŠ˜ì˜ ì‚¬ì£¼ + ë¡œë˜ 5ì„¸íŠ¸ë‹¤ëƒ¥ ğŸ</p>
          <p class="small">â€œì˜¤ëŠ˜ì˜ ì‚¬ì£¼(ì‚¬ìì„±ì–´)â€ + â€œê¸ˆì „ìš´ ìš”ì•½â€ + â€œí–‰ìš´ ìˆ«ì í¬í•¨ ì„¸íŠ¸â€ê¹Œì§€ í•œ ë°©ì—ë‹¤ëƒ¥</p>
        </div>
      </div>

      <div class="result">
        <!-- fortune -->
        <div class="fortune-card">
          <div class="fortune-inner">
            <div class="tabs">
              <div class="tab active">ì˜¤ëŠ˜ì˜ ìš´ì„¸</div>
              <div class="tab">ë‚´ì¼ì˜ ìš´ì„¸</div>
              <div class="tab">ì´ì£¼ì˜ ìš´ì„¸</div>
              <div class="tab">ì´ë‹¬ì˜ ìš´ì„¸</div>
            </div>

            <div class="icons" id="iconsRow"></div>

            <h3 class="fortune-title" id="fortuneTitle">ìš´ì„¸ì˜ ì´ìš´ì€ â€¦ ì´ë‹¤ëƒ¥</h3>
            <div class="fortune-date" id="fortuneDate">â€”</div>

            <div class="keyword">
              <span class="kw-pill" id="keywordPill">ğŸ“ ì˜¤ëŠ˜ì˜ ì‚¬ì£¼: -</span>
            </div>

            <p class="fortune-text" id="fortuneText">
              ì—¬ê¸°ì—” ì¶˜ì‹ì´ê°€ ì‚¬ì£¼ ëŠë‚Œìœ¼ë¡œ ìš”ì•½ì„ ë§í•´ì¤€ë‹¤ëƒ¥.
            </p>

            <div class="section">
              <div class="sec-h">ğŸ’ ê¸ˆì „ìš´ ì •ë¦¬(ì¶˜ì‹ì´ ë²„ì „)</div>
              <ul class="bullets" id="moneyBullets"></ul>

              <div class="row">
                <span class="pill" id="moneyPill">ê¸ˆì „ìš´: -</span>
                <a class="link-btn" target="_blank" rel="noopener noreferrer"
                   href="https://search.naver.com/search.naver?where=nexearch&sm=top_hty&fbm=0&ie=utf8&query=%EB%84%A4%EC%9D%B4%EB%B2%84+%EC%82%AC%EC%A3%BC&ackey=ntlpxe5v">
                  ğŸ” ë„¤ì´ë²„ ì‚¬ì£¼ ì°¸ê³ 
                </a>
              </div>

              <div class="section">
                <div class="sec-h">ğŸ€ í–‰ìš´ì˜ ìˆ«ì</div>
                <div class="row">
                  <div class="lucky" id="luckyNums"></div>
                  <span class="pill" id="luckyHint">ì•„ì§ í–‰ìš´ ìˆ«ì ì•ˆ ë½‘ì•˜ë‹¤ëƒ¥</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- sets -->
        <div class="sets" id="sets"></div>
      </div>
    </section>
  </main>

  <script>
    // --------------------------
    // DOM
    // --------------------------
    const setsEl  = document.getElementById("sets");
    const stampEl = document.getElementById("stamp");
    const toastEl = document.getElementById("toast");
    const seedInfoEl = document.getElementById("seedInfo");

    const btnPick      = document.getElementById("btnPick");
    const btnLucky     = document.getElementById("btnLucky");
    const btnLuckySets = document.getElementById("btnLuckySets");
    const btnCopyAll   = document.getElementById("btnCopyAll");
    const btnReset     = document.getElementById("btnReset");

    const inpName    = document.getElementById("inpName");
    const inpBirth   = document.getElementById("inpBirth");
    const inpKeyword = document.getElementById("inpKeyword");

    const mascotImg  = document.getElementById("mascot");

    const iconsRowEl    = document.getElementById("iconsRow");
    const fortuneTitleEl= document.getElementById("fortuneTitle");
    const fortuneDateEl = document.getElementById("fortuneDate");
    const keywordPillEl = document.getElementById("keywordPill");
    const fortuneTextEl = document.getElementById("fortuneText");
    const moneyBulletsEl= document.getElementById("moneyBullets");
    const moneyPillEl   = document.getElementById("moneyPill");
    const luckyNumsEl   = document.getElementById("luckyNums");
    const luckyHintEl   = document.getElementById("luckyHint");

    // state
    let currentSets = [];     // [[n..6], ...]
    let currentLucky = [];    // [n...]
    let currentFortune = null;// {keyword, title, text, moneyBullets, scores...}

    // --------------------------
    // Image fallback (no broken-link spam)
    // --------------------------
    function setMascotFallback() {
      const svg = `
        <svg xmlns="http://www.w3.org/2000/svg" width="180" height="180" viewBox="0 0 180 180">
          <defs>
            <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#fff7e6"/>
              <stop offset="1" stop-color="#f2ead7"/>
            </linearGradient>
            <linearGradient id="mint" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#b9ce89"/>
              <stop offset="1" stop-color="#5ca95b"/>
            </linearGradient>
          </defs>
          <rect width="180" height="180" rx="34" fill="url(#bg)"/>
          <path d="M62 58 L72 36 L90 54 L108 36 L118 58 L118 80 Q90 96 62 80 Z"
                fill="url(#mint)" stroke="#3f7c43" stroke-opacity=".35" stroke-width="3" />
          <circle cx="72" cy="36" r="6" fill="#f5d76e"/>
          <circle cx="108" cy="36" r="6" fill="#f5d76e"/>
          <circle cx="90" cy="54" r="6" fill="#f5d76e"/>
          <ellipse cx="90" cy="112" rx="62" ry="52" fill="#f2b37b" fill-opacity=".95"/>
          <circle cx="70" cy="105" r="8" fill="#1c2a3a"/>
          <circle cx="110" cy="105" r="8" fill="#1c2a3a"/>
          <ellipse cx="90" cy="120" rx="18" ry="14" fill="#fff"/>
          <ellipse cx="58" cy="120" rx="14" ry="12" fill="#f7a3b0" fill-opacity=".75"/>
          <ellipse cx="122" cy="120" rx="14" ry="12" fill="#f7a3b0" fill-opacity=".75"/>
        </svg>`;
      mascotImg.src = "data:image/svg+xml;charset=utf-8," + encodeURIComponent(svg.trim());
    }
    mascotImg.addEventListener("error", setMascotFallback);

    // --------------------------
    // Seeded RNG helpers (xmur3 + mulberry32)
    // --------------------------
    function xmur3(str) {
      let h = 1779033703 ^ str.length;
      for (let i = 0; i < str.length; i++) {
        h = Math.imul(h ^ str.charCodeAt(i), 3432918353);
        h = (h << 13) | (h >>> 19);
      }
      return function() {
        h = Math.imul(h ^ (h >>> 16), 2246822507);
        h = Math.imul(h ^ (h >>> 13), 3266489909);
        h ^= h >>> 16;
        return h >>> 0;
      };
    }
    function mulberry32(seed) {
      let a = seed >>> 0;
      return function() {
        a |= 0;
        a = (a + 0x6D2B79F5) | 0;
        let t = Math.imul(a ^ (a >>> 15), 1 | a);
        t = (t + Math.imul(t ^ (t >>> 7), 61 | t)) ^ t;
        return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
      };
    }

    function todayISO() {
      const d = new Date();
      const pad = (x) => String(x).padStart(2,"0");
      return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`;
    }
    function nowStamp() {
      const d = new Date();
      const pad = (x) => String(x).padStart(2,"0");
      return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())} ${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;
    }

    function buildBaseSeedString() {
      const name = (inpName.value || "").trim();
      const birth = (inpBirth.value || "").trim();
      const key = (inpKeyword.value || "").trim();
      // ë¹ˆ ê°’ë„ í¬í•¨í•´ì„œ "ëŠë‚Œ" ìœ ì§€ (ì…ë ¥ ì—†ìœ¼ë©´ ëœë¤ìª½ìœ¼ë¡œ)
      return `name=${name}|birth=${birth}|key=${key}`;
    }

    // --------------------------
    // Fortune (ì‚¬ì£¼ í‚¤ì›Œë“œ + í•´ì„¤ + ê¸ˆì „ìš´ ìš”ì•½)
    // - ë„¤ì´ë²„ ì‚¬ì£¼ "ìŠ¤íƒ€ì¼" ì°¸ê³ : íƒ­/ì•„ì´ì½˜/ì´ìš´ë¬¸êµ¬/ì‚¬ìì„±ì–´
    // - ì‹¤ì œ ë„¤ì´ë²„ ë°ì´í„° ê°€ì ¸ì˜¤ì§„ ì•ŠìŒ(ì˜¤í”„ë¼ì¸ ë‹¨ì¼ HTML)
    // --------------------------
    const SAJU_LIST = [
      {
        key:"ë„ì²­ë„ì„¤",
        headline:"ìš´ì„¸ì˜ ì´ìš´ì€ ë„ì²­ë„ì„¤ì´ë‹¤ëƒ¥",
        desc:"ì—¬ê¸°ì €ê¸° ë§ì´ ë§ê³  ìƒê°ë„ ë§ì•„ì§€ëŠ” ë‚ ì´ë‹¤ëƒ¥. ì§‘ì¤‘ì´ ííŠ¸ëŸ¬ì§€ê¸° ì‰¬ìš°ë‹ˆ, ì¤‘ìš”í•œ ê±´ â€˜ìˆœì„œâ€™ë¶€í„° ì¡ì•„ë¼ëƒ¥. í•˜ë‚˜ë§Œ ë”± ëë‚´ê³  ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ë©´ ìš´ì´ ì •ë¦¬ëœë‹¤ëƒ¥.",
        money:[
          "ì§€ì¶œì€ â€˜í•„ìš”/ìš•ì‹¬â€™ ë‘ ì¹¸ìœ¼ë¡œ ë‚˜ëˆ ì„œ ì²´í¬í•´ë¼ëƒ¥. ìš•ì‹¬ ì¹¸ì€ 24ì‹œê°„ ë³´ë¥˜ë‹¤ëƒ¥.",
          "ì‘ì€ ì´ë“ë³´ë‹¤ í° ì†ì‹¤ ë§‰ëŠ” ë‚ ì´ë‹¤ëƒ¥. ìë™ì´ì²´/êµ¬ë… ê²°ì œ í•œë²ˆ ì‹¹ ë³´ìëƒ¥.",
          "ì¶©ë™êµ¬ë§¤ ë“¤ì–´ì˜¤ë©´, ì¥ë°”êµ¬ë‹ˆì— ë„£ê³  ì‚°ì±…(ë˜ëŠ” ë¬¼ í•œ ì”) í•˜ê³  ë‹¤ì‹œ ë³´ë¼ëƒ¥."
        ],
        moneyTag:["ì ˆì•½", "ëˆ„ìˆ˜ì ê²€", "ì¶©ë™ë°©ì§€"]
      },
      {
        key:"ì „í™”ìœ„ë³µ",
        headline:"ìš´ì„¸ì˜ ì´ìš´ì€ ì „í™”ìœ„ë³µì´ë‹¤ëƒ¥",
        desc:"ì¡°ê¸ˆ ê¼¬ì¸ ê²ƒ ê°™ì•„ë„, ê·¸ê²Œ ì˜¤íˆë ¤ ì¢‹ì€ ë°©í–¥ìœ¼ë¡œ ë°”ë€ŒëŠ” ë‚ ì´ë‹¤ëƒ¥. â€˜ìˆ˜ì •â€™ì´ ë‹µì´ë‹¤ëƒ¥. ê³ ì¹˜ê³  ë‹¤ì‹œ í•˜ë©´ ê°‘ìê¸° ê¸¸ì´ ì—´ë¦°ë‹¤ëƒ¥.",
        money:[
          "ì†í•´ ë³¸ ëŠë‚Œì´ ë“¤ì–´ë„, â€˜ì •ë¦¬â€™í•˜ë©´ ëˆì´ ìƒˆëŠ” êµ¬ë©ì´ ë§‰íŒë‹¤ëƒ¥.",
          "í™˜ë¶ˆ/í•´ì§€/ì¬í˜‘ìƒ ê°™ì€ â€˜ë˜ëŒë¦¬ê¸°â€™ê°€ ëˆë³µ í¬ì¸íŠ¸ë‹¤ëƒ¥.",
          "ì˜¤ëŠ˜ì€ ìƒˆë¡œ ì‚¬ê¸°ë³´ë‹¤, ê¸°ì¡´ ê±° ì—…ê·¸ë ˆì´ë“œ/êµì²´ê°€ ì´ë“ì´ë‹¤ëƒ¥."
        ],
        moneyTag:["ì •ë¦¬", "í™˜ë¶ˆ", "ì¬í˜‘ìƒ"]
      },
      {
        key:"ìœ ë¹„ë¬´í™˜",
        headline:"ìš´ì„¸ì˜ ì´ìš´ì€ ìœ ë¹„ë¬´í™˜ì´ë‹¤ëƒ¥",
        desc:"ë¯¸ë¦¬ ì¤€ë¹„í•˜ë©´ ë§ˆìŒì´ í¸í•´ì§€ëŠ” ë‚ ì´ë‹¤ëƒ¥. ê³„íšì„ í¬ê²Œ ì¡ê¸°ë³´ë‹¤ â€˜ì²´í¬ë¦¬ìŠ¤íŠ¸ 3ê°œâ€™ë¡œ ì¤„ì´ë©´ ëœë‹¤ëƒ¥. ì‘ì€ ì¤€ë¹„ê°€ í° ì‹¤ìˆ˜ë¥¼ ë§‰ëŠ”ë‹¤ëƒ¥.",
        money:[
          "ì˜ˆì‚°ì„ â€˜ê³ ì •/ë³€ë™/ì˜ˆë¹„â€™ë¡œ 3ì¹¸ë§Œ ë‚˜ëˆ ë„ ëˆì´ ì•ˆ ìƒˆëŠ” ë‚ ì´ë‹¤ëƒ¥.",
          "ë¹„ìƒê¸ˆ(í˜¹ì€ ì˜ˆë¹„ë¹„) í•œ ì¹¸ ë§Œë“¤ì–´ë‘ë©´ ê¸ˆì „ìš´ì´ ì•ˆì •ëœë‹¤ëƒ¥.",
          "ì˜¤ëŠ˜ì€ íˆ¬ìë³´ë‹¤ â€˜í˜„ê¸ˆíë¦„â€™ ì ê²€ì´ ë” ì„¼ ë‚ ì´ë‹¤ëƒ¥."
        ],
        moneyTag:["ì˜ˆì‚°", "ë¹„ìƒê¸ˆ", "íë¦„ì ê²€"]
      },
      {
        key:"ì¼ì·¨ì›”ì¥",
        headline:"ìš´ì„¸ì˜ ì´ìš´ì€ ì¼ì·¨ì›”ì¥ì´ë‹¤ëƒ¥",
        desc:"ì¡°ê¸ˆë§Œ í•´ë„ ì„±ê³¼ê°€ ë³´ì´ëŠ” ë‚ ì´ë‹¤ëƒ¥. ì‹œì‘ì´ ë°˜ì´ë‹¤ëƒ¥. ë‹¨, ìš•ì‹¬ë‚´ì„œ í•œ ë²ˆì— í¬ê²Œ í•˜ë ¤ê³  í•˜ë©´ ì˜¤íˆë ¤ ì‚ë—í•œë‹¤ëƒ¥.",
        money:[
          "ë¶€ìˆ˜ì…/í¬ì¸íŠ¸/ìºì‹œë°± ê°™ì€ â€˜ì”ëˆ íšŒìˆ˜â€™ê°€ ê½¤ ì ì í•˜ë‹¤ëƒ¥.",
          "í° ìˆ˜ìµë³´ë‹¤ â€˜ë°˜ë³µ ê°€ëŠ¥í•œ ì‘ì€ ì´ë“â€™ì´ ëˆë³µì´ë‹¤ëƒ¥.",
          "ì˜¤ëŠ˜ì€ ê°€ê²© ë¹„êµ 5ë¶„ë§Œ í•´ë„ ì´ë“ ë³´ëŠ” ë‚ ì´ë‹¤ëƒ¥."
        ],
        moneyTag:["ì”ëˆíšŒìˆ˜", "ë°˜ë³µì´ë“", "ë¹„êµí•„ìˆ˜"]
      },
      {
        key:"ê³¼ìœ ë¶ˆê¸‰",
        headline:"ìš´ì„¸ì˜ ì´ìš´ì€ ê³¼ìœ ë¶ˆê¸‰ì´ë‹¤ëƒ¥",
        desc:"ë„ˆë¬´ ì—´ì‹¬íˆ í•˜ë©´ ì˜¤íˆë ¤ ì†í•´ ë³´ëŠ” ë‚ ì´ë‹¤ëƒ¥. í˜ ë¹¼ê³  ì ë‹¹íˆê°€ ë‹µì´ë‹¤ëƒ¥. â€˜ì ë‹¹íˆâ€™ê°€ ì˜¤ëŠ˜ì˜ í–‰ìš´ ìŠ¤í‚¬ì´ë‹¤ëƒ¥.",
        money:[
          "ì˜¤ëŠ˜ì€ í° ê²°ì œ/í° ì•½ì†ì€ í•˜ë£¨ë§Œ ë¯¸ë¤„ë¼ëƒ¥(ì§„ì§œ ì´ë“ë‚œë‹¤ëƒ¥).",
          "í• ì¸ì— íœ©ì“¸ë¦¬ë©´ ëˆì´ ìƒŒë‹¤ëƒ¥. í•„ìš”í•œ ê²ƒë§Œ ì‚¬ë¼ëƒ¥.",
          "í•œ ë²ˆì— ëª°ì•„ì„œ ì“°ê¸°ë³´ë‹¤, ë‚˜ëˆ ì„œ í™•ì¸í•˜ê³  ì¨ë¼ëƒ¥."
        ],
        moneyTag:["ê³¼ì†Œë¹„ì£¼ì˜", "ê²°ì •ìœ ì˜ˆ", "í•„ìš”ë§Œ"]
      },
      {
        key:"í˜¸ì‚¬ë‹¤ë§ˆ",
        headline:"ìš´ì„¸ì˜ ì´ìš´ì€ í˜¸ì‚¬ë‹¤ë§ˆë‹¤ëƒ¥",
        desc:"ì¢‹ì€ ì¼ì´ ìƒê¸¸ìˆ˜ë¡ ê¼¼ê¼¼íˆ í™•ì¸í•´ì•¼ í•˜ëŠ” ë‚ ì´ë‹¤ëƒ¥. â€˜ì„¤ë ˜â€™ì€ ì¢‹ì§€ë§Œ, í™•ì¸ ë²„íŠ¼ì„ ëˆ„ë¥´ê³  ê°€ë¼ëƒ¥.",
        money:[
          "ê³„ì•½/ê²°ì œ/êµ¬ë…ì€ ì•½ê´€Â·ê¸°ê°„Â·í•´ì§€ ì¡°ê±´ë¶€í„° í™•ì¸í•´ë¼ëƒ¥.",
          "ì˜¤ëŠ˜ì€ â€˜ë¬´ë£Œâ€™ì— ì†ê¸° ì‰¬ìš´ ë‚ ì´ë‹¤ëƒ¥. ë¬´ë£Œ ë‹¤ìŒì´ ìœ ë£Œë‹¤ëƒ¥.",
          "ê°€ê²©ë³´ë‹¤ â€˜í™˜ë¶ˆ ê°€ëŠ¥ ì—¬ë¶€â€™ê°€ ëˆë³µ í¬ì¸íŠ¸ë‹¤ëƒ¥."
        ],
        moneyTag:["í™•ì¸í•„ìˆ˜", "êµ¬ë…ì£¼ì˜", "ì•½ê´€ì²´í¬"]
      }
    ];

    function scoreLabel(x){
      if (x >= 85) return "ì•„ì£¼ ì¢‹ìŒ";
      if (x >= 70) return "ì¢‹ìŒ";
      if (x >= 55) return "ë¬´ë‚œ";
      if (x >= 40) return "ì£¼ì˜";
      return "ì¡°ì‹¬";
    }

    function fortuneFromSeed(seed32) {
      const rng = mulberry32(seed32);
      const idx = Math.floor(rng() * SAJU_LIST.length);
      const picked = SAJU_LIST[idx];

      // 6ê°œ ì¹´í…Œê³ ë¦¬ ì ìˆ˜
      const scores = {
        total: Math.floor(rng()*41) + 50,   // 50~90
        love:  Math.floor(rng()*51) + 40,   // 40~90
        money: Math.floor(rng()*51) + 40,
        work:  Math.floor(rng()*51) + 40,
        study: Math.floor(rng()*51) + 40,
        health:Math.floor(rng()*51) + 40
      };

      // money bulletsë¥¼ ì ìˆ˜ì— ë”°ë¼ ì‚´ì§ ë³€ì£¼
      const extra = [];
      if (scores.money >= 75) extra.push("ëˆ ë“¤ì–´ì˜¬ êµ¬ë©ë„ ë³´ì´ëŠ”ë°, ìš•ì‹¬ë§Œ ì¤„ì´ë©´ ë” ì¢‹ë‹¤ëƒ¥.");
      else if (scores.money <= 50) extra.push("ì˜¤ëŠ˜ì€ â€˜ìƒˆë¡œ ë²Œê¸°â€™ë³´ë‹¤ â€˜ì•ˆ ìƒˆê²Œ ë§‰ê¸°â€™ê°€ ì´ë“ì´ë‹¤ëƒ¥.");
      else extra.push("ì§€ì¶œë§Œ ì»¨íŠ¸ë¡¤í•˜ë©´ ë¬´ë‚œí•˜ê²Œ ê°„ë‹¤ëƒ¥.");

      return {
        keyword: picked.key,
        headline: picked.headline,
        desc: picked.desc,
        moneyBullets: [...picked.money, ...extra],
        moneyTags: picked.moneyTag,
        scores
      };
    }

    function renderIcons(scores){
      const items = [
        {emoji:"ğŸ§¿", label:"ì´ìš´", val: scores.total},
        {emoji:"ğŸ’—", label:"ì• ì •ìš´", val: scores.love},
        {emoji:"ğŸ’", label:"ê¸ˆì „ìš´", val: scores.money},
        {emoji:"ğŸªª", label:"ì§ì¥ìš´", val: scores.work},
        {emoji:"ğŸ“", label:"í•™ì—…/ì„±ì ", val: scores.study},
        {emoji:"ğŸ›¡ï¸", label:"ê±´ê°•ìš´", val: scores.health},
      ];
      iconsRowEl.innerHTML = "";
      items.forEach(it=>{
        const div = document.createElement("div");
        div.className = "icon-item";
        div.innerHTML = `
          <div class="icon-emoji">${it.emoji}</div>
          <div class="icon-label">${it.label}</div>
          <div class="icon-score">${it.val}ì  Â· ${scoreLabel(it.val)}</div>
        `;
        iconsRowEl.appendChild(div);
      });
    }

    function renderFortune(f){
      currentFortune = f;
      fortuneTitleEl.textContent = f.headline;
      fortuneDateEl.textContent = todayISO();

      keywordPillEl.textContent = `ğŸ“ ì˜¤ëŠ˜ì˜ ì‚¬ì£¼: ${f.keyword} (ì¶˜ì‹ì´ì‹ ìš”ì•½)`;

      fortuneTextEl.textContent = f.desc;

      // money section
      moneyBulletsEl.innerHTML = "";
      f.moneyBullets.forEach(t=>{
        const li = document.createElement("li");
        li.textContent = t;
        moneyBulletsEl.appendChild(li);
      });

      const tagText = f.moneyTags.map(x=>`#${x}`).join(" ");
      moneyPillEl.textContent = `ê¸ˆì „ìš´: ${f.scores.money}ì  Â· ${scoreLabel(f.scores.money)}  ${tagText}`;

      renderIcons(f.scores);
    }

    // --------------------------
    // Lotto helpers
    // --------------------------
    function rangeClass(n) {
      if (n <= 10) return "r1";
      if (n <= 20) return "r2";
      if (n <= 30) return "r3";
      if (n <= 40) return "r4";
      return "r5";
    }

    function pickOneSet(rng, mustInclude=[]) {
      const set = new Set(mustInclude);
      // mustIncludeê°€ 6ê°œ ì´ˆê³¼ë©´ ì˜ë¼ëƒ„(ì•ˆì „)
      const inc = [...set].slice(0,6);
      const s = new Set(inc);

      while (s.size < 6) {
        const n = Math.floor(rng() * 45) + 1;
        s.add(n);
      }
      return [...s].sort((a,b)=>a-b);
    }

    function pickFiveSetsWithSeed(seed, mustInclude=[]) {
      const out = [];
      for (let i=0;i<5;i++){
        const rng = mulberry32((seed + i * 0x9E3779B9) >>> 0);
        out.push(pickOneSet(rng, mustInclude));
      }
      return out;
    }

    function pickFiveSetsRandom(mustInclude=[]) {
      const out = [];
      for (let i=0;i<5;i++){
        out.push(pickOneSet(()=>Math.random(), mustInclude));
      }
      return out;
    }

    async function copyText(text) {
      try { await navigator.clipboard.writeText(text); return true; }
      catch { return false; }
    }

    function setToast(msg) { toastEl.textContent = msg; }

    function sparkleAt(x, y) {
      for (let i=0;i<10;i++){
        const s = document.createElement("div");
        s.className = "spark";
        const dx = (Math.random()*2-1) * 70;
        const dy = (Math.random()*2-1) * 70;
        s.style.left = x + "px";
        s.style.top  = y + "px";
        s.style.setProperty("--dx", dx + "px");
        s.style.setProperty("--dy", dy + "px");
        document.body.appendChild(s);
        s.addEventListener("animationend", ()=> s.remove());
      }
    }

    function renderSets(sets) {
      setsEl.innerHTML = "";
      sets.forEach((nums, idx) => {
        const card = document.createElement("div");
        card.className = "set-card";

        const top = document.createElement("div");
        top.className = "set-top";

        const label = document.createElement("div");
        label.className = "set-label";
        label.innerHTML = `ì„¸íŠ¸ ${idx+1} <span class="set-pill">${nums.join("-")}</span>`;

        const btn = document.createElement("button");
        btn.className = "mini-btn";
        btn.type = "button";
        btn.innerHTML = "ğŸ“‹ ë³µì‚¬";
        btn.addEventListener("click", async (e) => {
          const ok = await copyText(nums.join(", "));
          if (ok) setToast(`ë³µì‚¬ ì™„ë£Œë‹¤ëƒ¥ âœ… (ì„¸íŠ¸ ${idx+1})`);
          else setToast("ë³µì‚¬ê°€ ì•ˆ ëœë‹¤ëƒ¥â€¦ ë¸Œë¼ìš°ì € ê¶Œí•œ í™•ì¸í•´ë‹¬ë¼ëƒ¥ ğŸ˜¿");
          const rect = e.currentTarget.getBoundingClientRect();
          sparkleAt(rect.left + rect.width/2, rect.top + rect.height/2);
        });

        top.appendChild(label);
        top.appendChild(btn);

        const balls = document.createElement("div");
        balls.className = "balls";

        nums.forEach((n, j) => {
          const b = document.createElement("div");
          b.className = `ball ${rangeClass(n)}`;
          b.textContent = n;
          b.style.setProperty("--d", `${(idx*60) + (j*70)}ms`);
          requestAnimationFrame(() => b.classList.add("show"));
          balls.appendChild(b);
        });

        card.appendChild(top);
        card.appendChild(balls);
        setsEl.appendChild(card);
      });
    }

    // --------------------------
    // Lucky number
    // --------------------------
    function renderLuckyNumbers(nums){
      luckyNumsEl.innerHTML = "";
      nums.forEach((n,i)=>{
        const div = document.createElement("div");
        div.className = `num ${rangeClass(n)}`;
        div.style.animationDelay = `${i*70}ms`;
        div.textContent = n;
        luckyNumsEl.appendChild(div);
      });
      if (!nums.length){
        luckyHintEl.textContent = "ì•„ì§ í–‰ìš´ ìˆ«ì ì•ˆ ë½‘ì•˜ë‹¤ëƒ¥";
      } else {
        luckyHintEl.textContent = `í–‰ìš´ ìˆ«ì ${nums.length}ê°œ ë½‘ì•˜ë‹¤ëƒ¥ â†’ ì´ê±° í¬í•¨ ì„¸íŠ¸ë„ ê°€ëŠ¥!`;
      }
    }

    function pickLuckyNumbers(seed32){
      // 2~3ê°œ ì •ë„ê°€ ë³´ê¸° ì¢‹ì•„ì„œ: seedì— ë”°ë¼ ê²°ì •
      const rng = mulberry32(seed32 ^ 0xA5A5A5A5);
      const count = (Math.floor(rng()*2) + 2); // 2 or 3
      const s = new Set();
      while (s.size < count) s.add(Math.floor(rng()*45) + 1);
      return [...s].sort((a,b)=>a-b);
    }

    // --------------------------
    // Loading indicator
    // --------------------------
    function setLoading(on) {
      if (on) btnPick.classList.add("loading");
      else btnPick.classList.remove("loading");
    }

    // --------------------------
    // Main actions
    // --------------------------
    function computeFortuneSeed() {
      // ì˜¤ëŠ˜ì˜ ìš´ì„¸ëŠ” "ì˜¤ëŠ˜ ë‚ ì§œ"ë¥¼ ì„ì–´ì„œ ë§¤ì¼ ë°”ë€Œê²Œ
      const base = buildBaseSeedString();
      const daily = `${base}|today=${todayISO()}`;
      const seed32 = xmur3(daily)();
      return seed32;
    }

    function updateFortuneAndUI(){
      const seed32 = computeFortuneSeed();
      const f = fortuneFromSeed(seed32);
      renderFortune(f);

      seedInfoEl.textContent = `ê¸°ìš´: ${f.keyword} Â· ê¸ˆì „ìš´ ${f.scores.money}ì  (${scoreLabel(f.scores.money)}) ì´ë‹¤ëƒ¥`;
      fortuneDateEl.textContent = todayISO();
      return seed32;
    }

    // initial fortune on load (even without input)
    (function init(){
      const seed32 = computeFortuneSeed();
      renderFortune(fortuneFromSeed(seed32));
      renderLuckyNumbers([]);
    })();

    btnPick.addEventListener("click", async (e) => {
      setLoading(true);
      const rect = e.currentTarget.getBoundingClientRect();
      sparkleAt(rect.left + rect.width/2, rect.top + rect.height/2);
      await new Promise(r => setTimeout(r, 240));

      const seed32 = updateFortuneAndUI();

      // ì‚¬ì£¼ ê¸°ë°˜ 5ì„¸íŠ¸: í–‰ìš´ìˆ«ì ìˆìœ¼ë©´ í¬í•¨í•´ì£¼ë©´ â€œì‹ ë¹™ì„± ëŠë‚Œâ€ ë” ì‚´ì•„ì„œ ê¸°ë³¸ë„ í¬í•¨ ì²˜ë¦¬
      const must = currentLucky.length ? currentLucky : [];
      const useSeed = buildBaseSeedString().replace(/name=\\|birth=\\|key=/g, "") ? seed32 : seed32;
      currentSets = pickFiveSetsWithSeed(useSeed, must);

      renderSets(currentSets);
      stampEl.textContent = `ë½‘ì€ ì‹œê°„: ${nowStamp()}`;
      setToast(currentLucky.length
        ? `ì‚¬ì£¼ ê¸°ìš´ + í–‰ìš´ ìˆ«ì í¬í•¨ìœ¼ë¡œ 5ì„¸íŠ¸ ë½‘ì•˜ë‹¤ëƒ¥ ğŸ§§`
        : `ì‚¬ì£¼ ê¸°ìš´ìœ¼ë¡œ 5ì„¸íŠ¸ ë½‘ì•˜ë‹¤ëƒ¥ ğŸ¾ (í–‰ìš´ ìˆ«ìë„ ë½‘ì•„ë³´ë¼ëƒ¥)`
      );
      setLoading(false);
    });

    btnLucky.addEventListener("click", async (e)=>{
      const rect = e.currentTarget.getBoundingClientRect();
      sparkleAt(rect.left + rect.width/2, rect.top + rect.height/2);

      const seed32 = updateFortuneAndUI();
      currentLucky = pickLuckyNumbers(seed32);
      renderLuckyNumbers(currentLucky);
      setToast(`í–‰ìš´ì˜ ìˆ«ì ${currentLucky.join(", ")} ë½‘ì•˜ë‹¤ëƒ¥ ğŸ€`);
    });

    btnLuckySets.addEventListener("click", async (e)=>{
      const rect = e.currentTarget.getBoundingClientRect();
      sparkleAt(rect.left + rect.width/2, rect.top + rect.height/2);

      const seed32 = updateFortuneAndUI();

      if (!currentLucky.length){
        currentLucky = pickLuckyNumbers(seed32);
        renderLuckyNumbers(currentLucky);
      }

      // í–‰ìš´ ìˆ«ì í¬í•¨ ì„¸íŠ¸ëŠ” "ë°˜ë“œì‹œ í¬í•¨"
      currentSets = pickFiveSetsWithSeed(seed32 ^ 0x55AA55AA, currentLucky);
      renderSets(currentSets);
      stampEl.textContent = `ë½‘ì€ ì‹œê°„: ${nowStamp()}`;
      setToast(`í–‰ìš´ì˜ ìˆ«ì ${currentLucky.join(", ")} í¬í•¨í•´ì„œ 5ì„¸íŠ¸ ë§Œë“¤ì—ˆë‹¤ëƒ¥ ğŸ§§`);
    });

    btnCopyAll.addEventListener("click", async (e) => {
      if (!currentSets.length) { setToast("ì•„ì§ ë½‘ì€ ê²Œ ì—†ë‹¤ëƒ¥. ë¨¼ì € ë½‘ì•„ë¼ëƒ¥!"); return; }
      const text =
        (currentFortune
          ? `ì˜¤ëŠ˜ì˜ ì‚¬ì£¼: ${currentFortune.keyword}\nê¸ˆì „ìš´: ${currentFortune.scores.money}ì  (${scoreLabel(currentFortune.scores.money)})\ní–‰ìš´ì˜ ìˆ«ì: ${currentLucky.length? currentLucky.join(", ") : "ì—†ìŒ"}\n\n`
          : "") +
        currentSets.map((s, i) => `ì„¸íŠ¸ ${i+1}: ${s.join(", ")}`).join("\n");

      const ok = await copyText(text);
      if (ok) setToast("ì „ì²´ ë³µì‚¬ ì™„ë£Œë‹¤ëƒ¥ âœ…");
      else setToast("ë³µì‚¬ê°€ ì•ˆ ëœë‹¤ëƒ¥â€¦ ë¸Œë¼ìš°ì € ê¶Œí•œ í™•ì¸í•´ë‹¬ë¼ëƒ¥ ğŸ˜¿");

      const rect = e.currentTarget.getBoundingClientRect();
      sparkleAt(rect.left + rect.width/2, rect.top + rect.height/2);
    });

    btnReset.addEventListener("click", (e) => {
      currentSets = [];
      currentLucky = [];
      setsEl.innerHTML = "";
      stampEl.textContent = "ëŒ€ê¸° ì¤‘";
      renderLuckyNumbers([]);
      updateFortuneAndUI();
      setToast("ì´ˆê¸°í™”í–ˆë‹¤ëƒ¥. ë‹¤ì‹œ ë½‘ì•„ë³´ë¼ëƒ¥ ğŸ²");

      const rect = e.currentTarget.getBoundingClientRect();
      sparkleAt(rect.left + rect.width/2, rect.top + rect.height/2);
    });
  </script>
</body>
</html>
